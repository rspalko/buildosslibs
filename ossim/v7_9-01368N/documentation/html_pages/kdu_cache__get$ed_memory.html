<HTML>
<HEAD>
<TITLE> Kakadu Hyper-Doc (kdu_cache::get_reclaimed_memory) </TITLE>
<STYLE TYPE="text/css">
<!--
.indented-text { padding-left: 20pt; }
.function-text { padding-left: 80pt;
                 text-indent: -60pt; }
-->
</STYLE>
</HEAD>
<BODY TEXT="#000000" LINK="#0000ff" BGCOLOR="#B4DCB4">
<P ALIGN="RIGHT">|<A HREF="#SynopsiS"> synopsis </A>||<A HREF="#ReturnS"> return value </A>||<A HREF="#ArgS"> arguments </A>||<A HREF="kdu_cache__get$he_memory.html"> prev </A>||<A HREF="kdu_cache__get$red_bytes.html"> next </A>|</P>
<H1><A NAME="ToP">kdu_cache::get_reclaimed_memory</A></H1>
<P CLASS="function-text"><B>kdu_int64</B> get_reclaimed_memory(
<B>kdu_int64</B>&nbsp;&amp;&nbsp;peak_allocation,
<B>kdu_int64</B>&nbsp;&amp;&nbsp;preferred_limit)</P>
<P><A HREF="kdu_cache.html">Go to class description.</A></P>

<P ALIGN="CENTER"><HR></P><H2><A NAME="SynopsiS">Synopsis</A></H2>
<DIV CLASS="indented-text">
<P>
This function is provided to help track and manage
the consequences of automatic cache trimming operations
that may occur in response to a preferred size limit
supplied via 
<A HREF="kdu_cache__set$ory_limit.html">set_preferred_memory_limit</A>. The function's two arguments return the maximum amount
of memory allocated to date (same as 
<A HREF="kdu_cache__get$he_memory.html">get_peak_cache_memory</A>) and the value of any preferred byte limit (0 if there
is no limit in force), while its return value represents
the total amount of data reclaimed from the cache so
far, in response to any preferred limit (including
any limit that might have been overridden by a more
recent call to 
<A HREF="kdu_cache__set$ory_limit.html">set_preferred_memory_limit</A>).
</P><P>
 One application for this function is that it allows
a JPIP client to estimate whether it is likely that
a request it is about to issue is vulnerable to having
some of the existing data that is relevant to the request
trimmed away while new data arrives. This type of vulnerability
can be avoided (at some cost) by determining which
data-bins are relevant to the request and explicitly
"touching" each of them, so that they are least likely
to be trimmed away. For example, a client might deduce
that this vulnerability exists if 
<A HREF="kdu_cache__get$ed_memory.html#preferred_limit">preferred_limit</A> is positive and the 
<A HREF="kdu_cache__get$ed_memory.html#peak_allocation">peak_allocation</A> is getting close to the 
<A HREF="kdu_cache__get$ed_memory.html#preferred_limit">preferred_limit</A>. Data-bins are "touched" when they are the subject
of any of the data-bin specific functions provided
by this object, such as 
<A HREF="kdu_cache__set$ead_scope.html">set_read_scope</A>, 
<A HREF="kdu_cache__add$o_databin.html">add_to_databin</A>, 
<A HREF="kdu_cache__mark_databin.html">mark_databin</A> or just 
<A HREF="kdu_cache__tou$h_databin.html">touch_databin</A>.
</P>
</DIV>

<P ALIGN="CENTER"><HR></P><H2><A NAME="ReturnS">Return Value</A></H2><DIV CLASS="indented-text">
<P>
Total number of internal cache buffers reclaimed to
meet a preferred byte limit, multiplied by the size
of these buffers. This value is generally larger than
the amount of valid data deleted from the cache through
the automatic cache trimming procedure, since the internal
buffers might only be partially occupied at the point
when they are deleted.
</P>
</DIV>
<H2><A NAME="ArgS">Arguments</A></H2><DIV CLASS="indented-text">
<H4><A NAME="peak_allocation">peak_allocation</A> [<B>kdu_int64</B>&nbsp;&amp;]</H4><DIV CLASS="indented-text">
<P>
Returns the same value as 
<A HREF="kdu_cache__get$he_memory.html">get_peak_cache_memory</A>, but using a type that is guaranteed to always be
large enough to record the true value, rather than
potentially clipping it.
</P>
</DIV>
<H4><A NAME="preferred_limit">preferred_limit</A> [<B>kdu_int64</B>&nbsp;&amp;]</H4><DIV CLASS="indented-text">
<P>
Returns the value last passed to 
<A HREF="kdu_cache__set$ory_limit.html">set_preferred_memory_limit</A>, or 0 if no limit has ever been set. 0 means that
there is no current limit in force, so cache trimming
is disabled at present.
</P>
</DIV>
</DIV>

<P ALIGN="CENTER"><HR></P><P ALIGN="RIGHT">|<A HREF="#ToP"> top </A>||<A HREF="#SynopsiS"> synopsis </A>||<A HREF="#ReturnS"> return value </A>||<A HREF="#ArgS"> arguments </A>||<A HREF="kdu_cache__get$he_memory.html"> prev </A>||<A HREF="kdu_cache__get$red_bytes.html"> next </A>|</P>
</BODY>
</HTML>
