<HTML>
<HEAD>
<TITLE> Kakadu Hyper-Doc (kdu_cache::stream_class_marked) </TITLE>
<STYLE TYPE="text/css">
<!--
.indented-text { padding-left: 20pt; }
.function-text { padding-left: 80pt;
                 text-indent: -60pt; }
-->
</STYLE>
</HEAD>
<BODY TEXT="#000000" LINK="#0000ff" BGCOLOR="#B4DCB4">
<P ALIGN="RIGHT">|<A HREF="#SynopsiS"> synopsis </A>||<A HREF="#ReturnS"> return value </A>||<A HREF="#ArgS"> arguments </A>||<A HREF="kdu_cache__mark_databin.html"> prev </A>||<A HREF="kdu_cache__cle$all_marks.html"> next </A>|</P>
<H1><A NAME="ToP">kdu_cache::stream_class_marked</A></H1>
<DIR><DIR><H3><EM><U>Java:</U> Kdu_cache.Stream_class_marked</EM></H3></DIR></DIR>
<P CLASS="function-text"><B>bool</B> stream_class_marked(
<B>int</B>&nbsp;databin_class,
<B>kdu_long</B>&nbsp;codestream_id)</P>
<DIR><DIR><P CLASS="function-text"><EM><U>Java:</U> public native boolean Stream_class_marked(
int&nbsp;databin_class,
long&nbsp;codestream_id)</EM></P></DIR></DIR>
<P><A HREF="kdu_cache.html">Go to class description.</A></P>

<P ALIGN="CENTER"><HR></P><H2><A NAME="SynopsiS">Synopsis</A></H2>
<DIV CLASS="indented-text">
<P>
This function can greatly increase the efficiency associated
with the discovery of data-bin marks via the 
<B>mark_databins</B> function. In most cases, 
<B>mark_databins</B> is used to simultaneously recover any existing marks
and clear all marks associated with a specific data-bin.
However, if it can be determined that an entire class
of data-bins have no current marks, there is no need
to scan through them all, invoking that function. That
is what this function is for.
</P><P>
 There are three special cases worth mentioning here:
</P><UL><LI>
If 
<A HREF="kdu_cache__str$ss_marked.html#databin_class">databin_class</A> is 
<B>KDU_META_DATABIN</B> and 
<A HREF="kdu_cache__str$ss_marked.html#codestream_id">codestream_id</A>=0, the function determines whether there are any marks
associated with meta-data.
</LI><LI>
If 
<A HREF="kdu_cache__str$ss_marked.html#databin_class">databin_class</A> is -ve, the function determines whether any data-bin
class associated with the codestream identified by
<A HREF="kdu_cache__str$ss_marked.html#codestream_id">codestream_id</A> has any marks, excluding only the 
<B>KDU_META_DATABIN</B> class.
</LI><LI>
If 
<A HREF="kdu_cache__str$ss_marked.html#databin_class">databin_class</A> is either 
<B>KDU_MAIN_HEADER_DATABIN</B> or 
<B>KDU_TILE_HEADER_DATABIN</B>, the function returns true if either or both of these
classes hold marked data-bins. This is because the
internal implementation actually fuses the main and
tile header data-bins into one class (the fusion is
usually transparent to the application, but not in
this case). However, you should not rely upon this.
</LI></UL><P>
 For the purpose of this function, a data-bin class
within a codestream is considered to be marked if the
<A HREF="kdu_cache__mark_databin.html">mark_databin</A> function would return non-zero for any data-bin belonging
to that codestream-class.
</P><P>
 Note that the function may return true even if a codestream-class
has no current representation in the cache, if that
class or codestream might belong to a larger collection
of classes or codestreams that have been deleted from
the cache. Once an entire codestream has been truly
deleted from the cache, this function will continue
to return true when invoked with that codestream-id,
until the 
<A HREF="kdu_cache__cle$all_marks.html">clear_all_marks</A> or 
<A HREF="kdu_cache__set$all_marks.html">set_all_marks</A> function is called, both of which eliminate deletion
marks. This behaviour is important, since even after
explicitly clearing marks for specific data-bins within
a codestream that has been completely deleted, there
is no simple way to determine whether other data-bins
might have been eliminated from the cache for which
deletion marks might be appropriate. This is one reason
why the JPIP protocol defines the "mset" request field,
which allows it to explicitly clear the server's cache
model for entire codestreams &mdash; after doing this,
it would be appropriate to invoke 
<A HREF="kdu_cache__cle$all_marks.html">clear_all_marks</A> on that codestream.
</P><P>
 This function is usually invoked either with 
<B>KDU_META_DATABIN</B> as the class and a 
<A HREF="kdu_cache__str$ss_marked.html#codestream_id">codestream_id</A> of 0 to discover whether there are marked meta-databins,
or with -1 for the class and a specific 
<A HREF="kdu_cache__str$ss_marked.html#codestream_id">codestream_id</A>, to determine whether the codestream needs to be carefully
modelled to determine which data-bins should be the
subject of calls to 
<A HREF="kdu_cache__mark_databin.html">mark_databin</A>.
</P><P>
 As with 
<A HREF="kdu_cache__mark_databin.html">mark_databin</A>, this function does nothing (returning false) if invoked
on a 
<A HREF="kdu_cache.html">kdu_cache</A> object that has been attached to another (primary)
cache via 
<A HREF="kdu_cache__attach_to.html">attach_to</A>.
</P>
</DIV>

<P ALIGN="CENTER"><HR></P><H2><A NAME="ReturnS">Return Value</A></H2><DIV CLASS="indented-text">
<P>
True if the 
<A HREF="kdu_cache__mark_databin.html">mark_databin</A> function might return non-zero for any data-bin belonging
to the indicated 
<A HREF="kdu_cache__str$ss_marked.html#databin_class">databin_class</A> (or any of the classes associated with the wildcard
value of -1) within the codestream indicated by 
<A HREF="kdu_cache__str$ss_marked.html#codestream_id">codestream_id</A>. This includes data-bins for which internal marks
(including deletion marks) are explicitly recorded,
but also data-bins which belong to larger groups (perhaps
whole classes or codestreams) that have been deleted
from the cache while deletion marks existed.
</P>
</DIV>
<H2><A NAME="ArgS">Arguments</A></H2><DIV CLASS="indented-text">
<H4><A NAME="databin_class">databin_class</A> [<B>int</B>]</H4><DIV CLASS="indented-text">
<P>
This value should either be one of the valid data-bin
classes, in the range 0 to 
<B>KDU_NUM_DATABIN_CLASSES</B>-1, or else the "wildcard" value -1. The value -1 includes
all data-bin classes for the codestream identified
by 
<A HREF="kdu_cache__str$ss_marked.html#codestream_id">codestream_id</A>, excepting only the 
<B>KDU_META_DATABIN</B> class.
</P><P>
 Also, note that the 
<B>KDU_MAIN_HEADER_DATABIN</B> and 
<B>KDU_TILE_HEADER_DATABIN</B> classes may be internally fused for efficiency reasons
so that the function returns true if either of these
classes is used as a query and either of them contains
data-bins for which 
<A HREF="kdu_cache__mark_databin.html">mark_databin</A> would return non-zero.
</P>
</DIV>
<H4><A NAME="codestream_id">codestream_id</A> [<B>kdu_long</B>]</H4><DIV CLASS="indented-text">
<P>
Note that this function does not recognize negative
<A HREF="kdu_cache__str$ss_marked.html#codestream_id">codestream_id</A> values as wild-cards; if 
<A HREF="kdu_cache__str$ss_marked.html#codestream_id">codestream_id</A> is -ve, the function will inevitably return false.
</P>
</DIV>
</DIV>

<P ALIGN="CENTER"><HR></P><P ALIGN="RIGHT">|<A HREF="#ToP"> top </A>||<A HREF="#SynopsiS"> synopsis </A>||<A HREF="#ReturnS"> return value </A>||<A HREF="#ArgS"> arguments </A>||<A HREF="kdu_cache__mark_databin.html"> prev </A>||<A HREF="kdu_cache__cle$all_marks.html"> next </A>|</P>
</BODY>
</HTML>
